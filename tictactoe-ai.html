<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tic Tac Toe â€“ Neon Edition</title>

<style>
/* ---------- GLOBAL ---------- */
body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: radial-gradient(circle at top, #0b0f1a, #050611 60%);
    color: #e5e7eb;
    text-align: center;
    overflow-x: hidden;
}

/* ---------- WRAPPER ---------- */
.main-wrap {
    max-width: 1200px;
    margin: 0 auto;
    padding-top: 30px;
}

/* ---------- TITLE ---------- */
h1 {
    font-size: 32px;
    margin-bottom: 15px;
    background: linear-gradient(90deg, #38bdf8, #818cf8);
    -webkit-background-clip: text;
    color: transparent;
    font-weight: 800;
}

/* ---------- CONTROL PANEL ---------- */
.control-panel {
    margin: 0 auto 25px auto;
    padding: 14px 20px;
    width: 420px;
    background: rgba(17, 24, 39, 0.55);
    border: 1px solid rgba(56, 189, 248, 0.22);
    border-radius: 14px;
    backdrop-filter: blur(6px);
    box-shadow: 0 0 18px rgba(56, 189, 248, 0.18);
}

.control-panel button {
    background: rgba(56,189,248,0.15);
    border: 1px solid #38bdf8;
    color: #e5e7eb;
    padding: 9px 16px;
    border-radius: 10px;
    cursor: pointer;
    font-weight: 600;
    transition: 0.2s;
    margin: 5px;
}

.control-panel button:hover {
    background: rgba(56,189,248,0.35);
    transform: translateY(-2px);
}

/* AI thinking text */
#aiThinking {
    opacity: 0;
    transition: opacity 0.25s;
    font-size: 14px;
    color: #ccc;
    margin-bottom: 10px;
}

/* ---------- BOARD ---------- */
.board-frame {
    width: 420px;
    margin: 0 auto;
    padding: 22px;
    background: url('images/charred-wood.webp');
    background-size: cover;
    background-position: center;
    border-radius: 22px;
    box-shadow: 0 0 32px rgba(0,0,0,0.6), 0 0 24px rgba(56,189,248,0.25) inset;
}

#board {
    width: 100%;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.tile {
    height: 120px;
    background: rgba(255,255,255,0.06);
    border-radius: 18px;
    backdrop-filter: blur(8px);
    border: 1px solid rgba(56,189,248,0.25);
    box-shadow:
        0 0 18px rgba(56,189,248,0.25),
        inset 0 0 14px rgba(255,255,255,0.05);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 56px;
    font-weight: 800;
    cursor: pointer;
    transition: 0.22s ease;
}

.tile:hover {
    transform: scale(1.06);
    box-shadow:
        0 0 28px rgba(56,189,248,0.55),
        inset 0 0 16px rgba(255,255,255,0.08);
}

/* AI highlight */
.ai-flash {
    background: rgba(255,255,180,0.18) !important;
    box-shadow: 0 0 18px #ffe28a !important;
}

/* X and O neon */
.x {
    color: #38bdf8;
    text-shadow: 0 0 16px #38bdf8, 0 0 28px #38bdf8;
}

.o {
    color: #f472b6;
    text-shadow: 0 0 16px #f472b6, 0 0 28px #f472b6;
}

/* Win line */
.win-line {
    position: absolute;
    height: 8px;
    background: linear-gradient(90deg, #38bdf8, #818cf8);
    box-shadow: 0 0 18px #38bdf8;
    border-radius: 6px;
    animation: winline 0.4s ease-out forwards;
}

@keyframes winline {
    from { opacity: 0; transform: scaleX(0); }
    to { opacity: 1; transform: scaleX(1); }
}

/* Particles */
.particle {
    position: fixed;
    width: 8px;
    height: 8px;
    background: #38bdf8;
    border-radius: 50%;
    filter: blur(1px);
    animation: fall 0.9s linear forwards;
    opacity: 0.85;
}

@keyframes fall {
    to {
        transform: translateY(90px);
        opacity: 0;
    }
}

/* Mobile */
@media (max-width: 480px) {
    .board-frame {
        width: 92vw;
    }
    .tile {
        height: 90px;
        font-size: 42px;
    }
}
</style>
</head>

<body>

<div class="main-wrap">

    <h1>Tic Tac Toe â€” Neon Edition</h1>

    <div id="aiThinking">ðŸ¤– AI is thinking...</div>

    <div class="control-panel">
        <button onclick="restartGame()">Restart</button>
        <button onclick="resetScore()">Reset Score</button>
        <p style="margin-top:6px;font-size:14px;opacity:0.8;">
            Score: <span id="scoreX">0</span> â€“ <span id="scoreO">0</span>
        </p>
    </div>

    <div class="board-frame">
        <div id="board"></div>
    </div>

    <h2 id="status" style="margin-top:22px;"></h2>
</div>

<script>
/* GAME STATE */
let board = ["","","","","","","","",""];
let current = "X";
let scoreX = 0, scoreO = 0;
let gameOver = false;

const boardEl = document.getElementById("board");
const statusEl = document.getElementById("status");
const aiThinking = document.getElementById("aiThinking");

function init() {
    boardEl.innerHTML = "";
    gameOver = false;
    board.forEach((v,i)=>{
        const t = document.createElement("div");
        t.className="tile";
        t.dataset.i=i;
        t.onclick=tileClick;
        boardEl.appendChild(t);
    });
}
init();

/* HUMAN MOVE */
function tileClick() {
    const i = this.dataset.i;
    if (board[i] || gameOver) return;

    board[i] = "X";
    render();
    if (checkWin()) return;

    adaptiveAIMove();
}

/* RENDER BOARD */
function render() {
    [...boardEl.children].forEach((t,i)=>{
        t.innerHTML =
            board[i]==="X" ? `<span class="x">X</span>` :
            board[i]==="O" ? `<span class="o">O</span>` : "";
    });
}

/* ADAPTIVE AI */
function adaptiveAIMove() {
    aiThinking.style.opacity = 1;

    setTimeout(()=>{
        let move;

        // If player is strong â†’ switch to minimax
        if (playerIsStrong()) {
            move = aiMoveHard();
        }
        else {
            // Medium intelligent
            move = aiMoveMedium();
        }

        if (move == null) return;

        board[move] = "O";

        highlightAIMove(move);
        render();
        aiThinking.style.opacity = 0;

        checkWin();

    }, 500);
}

/* Detect if player is strong */
function playerIsStrong() {
    let filled = board.filter(v=>v!=="").length;
    return filled >= 3; // adaptive trigger
}

/* MEDIUM AI */
function aiMoveMedium() {
    // Try winning move
    for (let [a,b,c] of wins) {
        if (board[a]==="O" && board[b]==="O" && board[c]==="") return c;
        if (board[a]==="O" && board[b]==="" && board[c]==="O") return b;
        if (board[a]==="" && board[b]==="O" && board[c]==="O") return a;
    }
    // Block player
    for (let [a,b,c] of wins) {
        if (board[a]==="X" && board[b]==="X" && board[c]=="") return c;
        if (board[a]==="X" && board[b]=="" && board[c]==="X") return b;
        if (board[a]=="" && board[b]==="X" && board[c]==="X") return a;
    }

    // Otherwise random
    let empty = [];
    board.forEach((v,i)=>{ if(!v) empty.push(i); });
    return empty[Math.floor(Math.random()*empty.length)];
}

/* HARD AI (Minimax) */
function aiMoveHard() {
    let bestScore=-Infinity, bestMove=null;
    for (let i=0;i<9;i++){
        if (!board[i]) {
            board[i]="O";
            let score = minimax(board,0,false);
            board[i]="";
            if (score > bestScore) {
                bestScore=score;
                bestMove=i;
            }
        }
    }
    return bestMove;
}

function minimax(board, depth, isMaximizing) {
    let winner = silentWinner();
    if (winner==="O") return 10-depth;
    if (winner==="X") return depth-10;
    if (board.every(v=>v)) return 0;

    if (isMaximizing) {
        let best=-Infinity;
        for (let i=0;i<9;i++){
            if (!board[i]) {
                board[i]="O";
                best=Math.max(best, minimax(board,depth+1,false));
                board[i]="";
            }
        }
        return best;
    } else {
        let best=Infinity;
        for (let i=0;i<9;i++){
            if (!board[i]) {
                board[i]="X";
                best=Math.min(best, minimax(board,depth+1,true));
                board[i]="";
            }
        }
        return best;
    }
}

/* AI move highlight */
function highlightAIMove(i) {
    const tile = boardEl.children[i];
    tile.classList.add("ai-flash");
    setTimeout(()=>tile.classList.remove("ai-flash"),350);
}

/* CHECK WIN */
const wins = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
];

function checkWin() {
    for (const w of wins) {
        const [a,b,c] = w;
        if (board[a] && board[a]===board[b] && board[a]===board[c]) {
            drawWinLine(w);

            gameOver=true;
            statusEl.innerHTML = `${board[a]} Wins!`;

            if (board[a]==="X") scoreX++; else scoreO++;
            document.getElementById("scoreX").innerHTML=scoreX;
            document.getElementById("scoreO").innerHTML=scoreO;

            return true;
        }
    }
    return false;
}

/* Silent winner (used for minimax) */
function silentWinner() {
    for (const [a,b,c] of wins) {
        if (board[a] && board[a]===board[b] && board[a]===board[c])
            return board[a];
    }
    return null;
}

/* WIN LINE */
function drawWinLine(w) {
    const tiles=[...boardEl.children];
    const first=tiles[w[0]].getBoundingClientRect();
    const last=tiles[w[2]].getBoundingClientRect();

    const line=document.createElement("div");
    line.className="win-line";

    line.style.top=(first.top+last.top)/2+"px";
    line.style.left=(first.left+last.left)/2+"px";
    line.style.width=Math.hypot(last.left-first.left,last.top-first.top)+"px";
    line.style.transform=
      `translate(-50%, -50%) rotate(${Math.atan2(last.top-first.top,last.left-first.left)}rad)`;

    document.body.appendChild(line);
}

/* PARTICLES */
function spawnParticles() {
    for (let i=0;i<14;i++){
        const p=document.createElement("div");
        p.className="particle";
        p.style.left=(window.innerWidth/2 + (Math.random()*120-60))+"px";
        p.style.top=(window.innerHeight/2 + (Math.random()*120-60))+"px";
        document.body.appendChild(p);
        setTimeout(()=>p.remove(),900);
    }
}

/* Restart */
function restartGame() {
    board=["","","","","","","","",""];
    current="X";
    statusEl.innerHTML="";
    gameOver=false;
    document.querySelectorAll(".win-line").forEach(l=>l.remove());
    init();
}

/* Reset score */
function resetScore() {
    scoreX=0;
    scoreO=0;
    document.getElementById("scoreX").innerHTML=0;
    document.getElementById("scoreO").innerHTML=0;
}
</script>
<div style="text-align:center; margin:15px 0;">
  <a id="backToHub" href="index.html"
     style="
       color:#38bdf8;
       font-size:14px;
       text-decoration:none;
       font-weight:700;
       padding:4px 10px;
       border:1px solid #38bdf8;
       border-radius:8px;
       box-shadow:0 0 10px rgba(56,189,248,0.45);
       display:inline-block;
     ">
    â¬… Back to Hub 
  </a>
</div>
<script src="/js/ads.js"></script>
</body>
</html>
